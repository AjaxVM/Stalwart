<html>
    <head>
        <script type='text/javascript' src='external/jquery-2.1.4.js'></script>
        <script type='text/javascript' src='stalwart/stalwart.js' stalwart></script>
        <script type='text/javascript'>
            //sW.debugLog = true;
            //try requiring a fake module - should crash out the execution of sW.init completely
            var prereqs = [
                // ['sW.testy', sW.rootPath()+'testy.js']
            ];
            sW.Trigger.on('sW.Module.moduleLoaded', function(name){
                console.log(name+' loaded!');
            });
            sW.init(prereqs, function(){
                //test including non-existant module
                //this will async load module and apply it AFTER the rest of this script has executed
                //use sW.onFullLoad(callback) to run code after all sW.includes are done
                //sW.Module.include('sW.test', sW.rootPath()+'test.js');
                //test including something we already have
                //sW.Module.include('sW.Class', sW.rootPath()+'class.js');
                console.log(sW.Module.get('sW.Class')); //test getting module - should log an object representing the sW.Class namespace

                //test inheritance and instanceOf
                Being = sW.Class.Class('Being', function(){
                    this.init = function(){
                        this.alive = true;
                        this.age = 0;
                        this.lifespan = 1000;
                    }

                    this.expose('age');
                });

                Animal = sW.Class.Class('Animal', [Being], function(){
                    this.init = function(){
                        this.__super('Being.init');
                        this.lifespan = 25;
                        this.type = 'Animal (generic)';
                    }
                });

                Dog = sW.Class.Class('Dog', [Animal], function(){
                    this.init = function(){
                        this.__super('Animal.init');
                        this.type = 'Dog';
                        this.lifespan = 15;
                    }
                });

                a = new Being();
                b = new Animal();
                c = new Dog();

                console.log(a.instanceOf(Being), a.instanceOf(Animal), a.instanceOf(Dog), 'true false false');
                console.log(b.instanceOf(Being), b.instanceOf(Animal), b.instanceOf(Dog), 'true true false');
                console.log(c.instanceOf(Being), c.instanceOf(Animal), c.instanceOf(Dog), 'true true true');

                var un = a.watch('age', b, 'age'); //also sets a.age to b.age
                b.setAge(45);
                console.log(a.getAge(), b.getAge(), c.getAge(), '45 45 0'); // 45,45,0
                un();

                un = a.bind('age', c, 'age'); //also sets a.age to c.age
                console.log(a.getAge(), b.getAge(), c.getAge(), '0 45 0'); // 0,45,0
                a.setAge(57);
                console.log(a.getAge(), b.getAge(), c.getAge(), '57 45 57'); // 57,45,57
                un();

                a.setAge(15);
                console.log(a.getAge(), b.getAge(), c.getAge(), '15 45 57'); // 15,45,57
                b.setAge(30);
                console.log(a.getAge(), b.getAge(), c.getAge(), '15 30 57'); // 15,30,57
                c.setAge(45);
                console.log(a.getAge(), b.getAge(), c.getAge(), '15 30 45'); // 15,30,45
            });
        </script>
    </head>

    <body>
        <h1>Hello World</h1>
    </body>
</html>
