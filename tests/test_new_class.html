<!DOCTYPE HTML>
<html>
  <head>
    <title>Project Stalwart: Unit Tests</title>

    <script src="external/jquery-2.1.4.js" type='text/javascript'></script>
    <script src='../stalwart/stalwart.js' type='text/javascript' stalwart></script>

    <script type='text/javascript'>
      sW.init(function(){
        var Animal = sW.Class.Class2('Animal', function(){
          this.__public__ = ['age', 'alive'];
          this.id = 0
          this.__init__ = function(animalType, name, age){
            this.animalType = animalType;
            this.name = name || 'John Doe';

            this.id = Animal.prototype.id++;
            this.echo = 23;
            this.age = age || 1;

            this.alive = true;

            // this.expose('age', 'alive');
          }
          this.grow = function(years){
            this.age += years;
          }
        });

        var Dog = sW.Class.Class2('Dog', [Animal], function(){
          this.__init__ = function(name, age){
            Animal.prototype.__init__.call(this, 'Canine', name, age);

            // this.expose('echo');
          }
        });

        var Person = sW.Class.Class2('Person', [Animal], function(){

          this.__public__ = [
            'height', 
            'happiness',
            'hunger',
            'thirst',
            'speed',
            'strength',
            'endurance',
            'intelligence'];

          this.__init__ = function(name){
            Animal.prototype.__init__.call(this, 'Homo Sapien', name, 21);

            this.height = 5.9;
            this.happiness = 50;
            this.hunger = 50;
            this.thirst = 50;

            this.speed = 5;
            this.strength = 5;
            this.endurance = 5;
            this.intelligence = 5;

            // this.expose(
            //     'height',
            //     'happiness',
            //     'hunger',
            //     'thirst',
            //     'speed',
            //     'strength',
            //     'endurance',
            //     'intelligence');
          }

          this.__setHeight__ = function(value){
            if (value > 0){
              console.log("I'm grooooowiiiiiing!");
            } else {
              console.log ("Ack! I'm shrinking!?!?");
            }

            this.__setExposed__('height', value);
          }

          this.__setAttr__ = function(prop, value){
            console.log('Setting "'+prop+'" (should never be "height") to value "'+value+'" ... Psych not doing anything!!!');
          }

          this.__getAttr__ = function(prop){
            console.log('Getting "'+prop+'" - should be anything exposed!');
            return 'unicorn!('+this.__getExposed__(prop)+')';
          }
        });

        var a = new Animal('Feline', 'kitty', 13);
        var b = new Dog('asdjlh', 12);
        var c = new Dog('hkasd', 15);

        console.log(a);
        console.log(b);
        console.log(c);

        var bobby = new Person('Bobby Bob');
        console.log(bobby);
        bobby.height = 4.1;
        bobby.speed = 7;
        console.log(bobby.height, bobby.speed);


        //10k objects
        //no exposing: 1.67ms
        //exposing just Person: 180ms
        //exposing Person/Animal: 260ms

        // start = performance.now();
        // for (var i=0; i<=10000; i++){
        //   var c = new Person('asasd', 1);
        //   c.grow(1);
        // }
        // end = performance.now();

        // console.log(c);
        // console.log('10 thousand took '+(end-start)+' milliseconds');
      });
    </script>
    
  </head>
</html>
